<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Title</title>


</head>
<body>
<script src="../public/header.js"></script>
<script src="../public/echarts-gl.js"></script>
<script>
	let mycharts=echarts.init(document.getElementById('main1'))
    $.getJSON('./air-geo.json',function (data) {
        function getAirportCoord(idx) {
            return [data.airports[idx][3],data.airports[idx][4]]
		}
		let routes=data.routes.map(function (airline) {
            return [
            	getAirportCoord(airline[1]),
                getAirportCoord(airline[2])
            ]
		});
		mycharts.setOption({
			backgroundColor:'#000',
			globe:{                           //地球组件。组件提供了地球的绘制以及相应的坐标系
				baseTexture:'./world_background.jpg',//地球的纹理
				heightTexture:'./world_4k.jpg',//地球的高度纹理
				shading:'lambert',
				// 地球中三维图形的着色效果，echarts-gl 中支持下面三种着色方式
				//'color' 只显示颜色，不受光照等其它因素的影响。
				// 'lambert' 通过经典的 lambert 着色表现光照带来的明暗。
				// 'realistic' 真实感渲染。
				light:{               //光照相关的设置。在 shading 为 'color' 的时候无效。光照的设置会影响到组件以及组件所在坐标系上的所有图表。
					main: {           //场景主光源的设置
						intensity:0.4  //光照强度
					},
					ambient:  {        //全局的环境光设置。
						intensity:0.4
					}
				},
				viewControl:{
					autoRotate:false   //设置可以旋转
				}
			},
			series:[{
				type:'lines3D',
				coordinateSystem:'globe',   //可选geo3D,即三维坐标系，当前是全球坐标系
				blendMode:'lighter',  //如果出现重叠，那么重叠的时候就高亮显示
				lineStyle:{   //飞线样式
					width:1,
					color:'rgb(50,50,150)',
					opacity:0.1
				},
				data:routes  //设置数据
			}]
		})
	});


</script>
</body>
</html>